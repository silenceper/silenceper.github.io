<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>silenceper – Claude Code</title><link>/tags/claude-code/</link><description>Recent content in Claude Code on silenceper</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 21 Aug 2025 00:00:00 +0000</lastBuildDate><atom:link href="/tags/claude-code/index.xml" rel="self" type="application/rss+xml"/><item><title>在Claude Code中使用DeepSeek v3.1模型：完整指南</title><link>/blog/2025-08-21-deepseek-claude-code/</link><pubDate>Thu, 21 Aug 2025 00:00:00 +0000</pubDate><guid>/blog/2025-08-21-deepseek-claude-code/</guid><description>
&lt;h2&gt;DeepSeek v3.1 模型介绍&lt;span class="hx-absolute -hx-mt-20" id="deepseek-v31-模型介绍"&gt;&lt;/span&gt;
&lt;a href="#deepseek-v31-%e6%a8%a1%e5%9e%8b%e4%bb%8b%e7%bb%8d" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;DeepSeek v3.1 于 2025 年 8 月 21 日发布，是在 V3 基础上的重要升级，具有以下核心特性：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;混合推理架构&lt;/strong&gt;：同一模型支持“非思考模式”和“思考模式”，分别对应 &lt;code&gt;deepseek-chat&lt;/code&gt; 与 &lt;code&gt;deepseek-reasoner&lt;/code&gt;，便于在速度与推理深度间灵活取舍。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;128K 上下文长度&lt;/strong&gt;：更长上下文，适合代码库分析、长文档处理与多文件协作。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;思考效率提升&lt;/strong&gt;：在思维链压缩后，V3.1-Think 用更少的 tokens 达到与 R1-0528 近似的效果。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;工具与智能体能力增强&lt;/strong&gt;：在代码修复（SWE）与复杂终端任务（Terminal-Bench）上显著提升，更适合工具调用/多步任务。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Function Calling（strict）支持&lt;/strong&gt;：Beta 接口支持严格模式，确保函数输出满足 schema（详见官方文档）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Anthropic API 兼容&lt;/strong&gt;：可直接以 Anthropic API 形式接入 Claude Code 与其生态。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DeepSeek V3.1 发布说明：&lt;a href="https://api-docs.deepseek.com/zh-cn/news/news250821" target="_blank" rel="noopener"&gt;DeepSeek V3.1 发布 2025/08/21&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Claude Code 安装指南&lt;span class="hx-absolute -hx-mt-20" id="claude-code-安装指南"&gt;&lt;/span&gt;
&lt;a href="#claude-code-%e5%ae%89%e8%a3%85%e6%8c%87%e5%8d%97" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3&gt;系统要求&lt;span class="hx-absolute -hx-mt-20" id="系统要求"&gt;&lt;/span&gt;
&lt;a href="#%e7%b3%bb%e7%bb%9f%e8%a6%81%e6%b1%82" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;macOS、Windows 或 Linux 系统&lt;/li&gt;
&lt;li&gt;Node.js 16+ 版本&lt;/li&gt;
&lt;li&gt;稳定的网络连接&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;安装步骤&lt;span class="hx-absolute -hx-mt-20" id="安装步骤"&gt;&lt;/span&gt;
&lt;a href="#%e5%ae%89%e8%a3%85%e6%ad%a5%e9%aa%a4" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;下载 Claude Code&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;访问 &lt;a href="https://claude.ai/code" target="_blank" rel="noopener"&gt;Claude Code 官网&lt;/a&gt; 下载对应版本的安装包&lt;/li&gt;
&lt;li&gt;或者通过 npm 安装：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;npm install -g @anthropic-ai/claude-code&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
&gt;
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;在 Claude Code 中配置 DeepSeek v3.1&lt;span class="hx-absolute -hx-mt-20" id="在-claude-code-中配置-deepseek-v31"&gt;&lt;/span&gt;
&lt;a href="#%e5%9c%a8-claude-code-%e4%b8%ad%e9%85%8d%e7%bd%ae-deepseek-v31" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;按照 Anthropic API 兼容规范，Claude Code 只需设置以下环境变量即可切换到 DeepSeek 模型：&lt;/p&gt;
&lt;h3&gt;设置环境变量（临时会话）&lt;span class="hx-absolute -hx-mt-20" id="设置环境变量临时会话"&gt;&lt;/span&gt;
&lt;a href="#%e8%ae%be%e7%bd%ae%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e4%b8%b4%e6%97%b6%e4%bc%9a%e8%af%9d" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# DeepSeek 提供的 Anthropic 兼容入口&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;ANTHROPIC_BASE_URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://api.deepseek.com/anthropic
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 使用 DeepSeek 的 API Key（Claude Code 读取 ANTHROPIC_AUTH_TOKEN）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;ANTHROPIC_AUTH_TOKEN&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;DEEPSEEK_API_KEY&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 默认主模型（非思考模式）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;ANTHROPIC_MODEL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;deepseek-chat
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# 快速小模型（同样可设为 deepseek-chat）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;ANTHROPIC_SMALL_FAST_MODEL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;deepseek-chat&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
&gt;
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;若希望在 Claude Code 中启用“思考模式”，将 &lt;code&gt;ANTHROPIC_MODEL&lt;/code&gt; 改为：&lt;/p&gt;
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;ANTHROPIC_MODEL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;deepseek-reasoner&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
&gt;
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;提示：上述方式仅对当前 shell 会话生效。若需长期生效，可将这些 &lt;code&gt;export&lt;/code&gt; 行加入 &lt;code&gt;~/.zshrc&lt;/code&gt; 或 &lt;code&gt;~/.bashrc&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;启动与验证&lt;span class="hx-absolute -hx-mt-20" id="启动与验证"&gt;&lt;/span&gt;
&lt;a href="#%e5%90%af%e5%8a%a8%e4%b8%8e%e9%aa%8c%e8%af%81" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code"&gt;
&lt;div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; your-project
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;claude&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0"&gt;
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
&gt;
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"&gt;&lt;/div&gt;
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;启动后，Claude Code 将读取环境变量并使用 DeepSeek 模型。你可以直接在命令行对话进行代码协作与修改。若需确认模型，查看启动日志或在会话中询问当前模型配置。&lt;/p&gt;
&lt;p&gt;&lt;img src="https://public-1251960616.cos.ap-nanjing.myqcloud.com/file/9zH9z6.png" alt="Claude Code 集成 DeepSeek v3.1 演示" loading="lazy" /&gt;&lt;/p&gt;
&lt;p&gt;更多兼容细节与字段支持矩阵，参考官方文档：&lt;a href="https://api-docs.deepseek.com/zh-cn/guides/anthropic_api" target="_blank" rel="noopener"&gt;Anthropic API 指南&lt;/a&gt;。&lt;/p&gt;
&lt;h2&gt;常见问题与注意事项&lt;span class="hx-absolute -hx-mt-20" id="常见问题与注意事项"&gt;&lt;/span&gt;
&lt;a href="#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e4%b8%8e%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;模型与模式选择&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;deepseek-chat&lt;/code&gt;：非思考模式，响应更短更快。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deepseek-reasoner&lt;/code&gt;：思考模式，适合复杂多步推理场景。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;上下文长度&lt;/strong&gt;：V3.1 API 默认支持 128K 上下文，适合长文档/多文件协作。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;工具调用与函数&lt;/strong&gt;：支持 &lt;code&gt;tools&lt;/code&gt; 与 &lt;code&gt;tool_choice&lt;/code&gt;（&lt;code&gt;none&lt;/code&gt;/&lt;code&gt;auto&lt;/code&gt;/&lt;code&gt;any&lt;/code&gt;/&lt;code&gt;tool&lt;/code&gt;）。Beta 接口支持 strict Function Calling 以保证输出符合 schema（以官方文档为准）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;字段兼容性要点&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;temperature&lt;/code&gt;（0.0~2.0）、&lt;code&gt;max_tokens&lt;/code&gt;、&lt;code&gt;system&lt;/code&gt;、&lt;code&gt;stream&lt;/code&gt; 均支持。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;thinking&lt;/code&gt; 字段在兼容模式下被忽略；图片/文档/搜索结果等部分复杂 message 类型暂不支持。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tokenizer/模板差异&lt;/strong&gt;：V3.1 对分词器与 chat template 有较大调整，与 V3 存在差异，迁移前请阅读新版说明。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;参考：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;发布说明：&lt;a href="https://api-docs.deepseek.com/zh-cn/news/news250821" target="_blank" rel="noopener"&gt;DeepSeek V3.1 发布 2025/08/21&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;兼容说明：&lt;a href="https://api-docs.deepseek.com/zh-cn/guides/anthropic_api" target="_blank" rel="noopener"&gt;Anthropic API 指南&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参考资料&lt;span class="hx-absolute -hx-mt-20" id="参考资料"&gt;&lt;/span&gt;
&lt;a href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;DeepSeek 官方文档 · 新闻：&lt;a href="https://api-docs.deepseek.com/zh-cn/news/news250821" target="_blank" rel="noopener"&gt;DeepSeek V3.1 发布 2025/08/21&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;DeepSeek 官方文档 · 指南：&lt;a href="https://api-docs.deepseek.com/zh-cn/guides/anthropic_api" target="_blank" rel="noopener"&gt;Anthropic API&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>